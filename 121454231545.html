<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>prototype</title>
  <link rel="icon" href="9582013.png">

  <style>
    body {
      margin:0;
      font-family:"Segoe UI",system-ui,sans-serif;
      background-image:
        linear-gradient(135deg, rgba(245,247,250,0.5), rgba(195,207,226,0.5)),
        url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1950&q=80');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      overflow-x: hidden;
      transition: background 0.3s;
    }
    header{
      background:#ffffffcc;
      padding:20px;
      text-align:center;
      position:sticky; top:0;
    }
    main{max-width:1200px;margin:40px auto;padding:0 20px;}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:20px;}
    .card{background:#fff;border-radius:12px;cursor:pointer;box-shadow:0 4px 10px rgba(0,0,0,.08);}
    .colors{display:flex;height:120px;}
    .colors div{flex:1;}
    .palette-full{display:flex;height:260px;border-radius:16px;overflow:hidden;}
    .palette-full div{flex:1;display:flex;align-items:flex-end;justify-content:center;color:#fff;font-weight:bold;padding:12px;cursor:pointer;}
    .back{display:inline-block;margin-bottom:16px;text-decoration:none;color:#333;}
    .color-box{height:200px;border-radius:20px;display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:bold;margin-bottom:12px;}
    .related .row{display:flex;gap:12px;margin-bottom:16px;}
    .swatch{flex:1;padding:12px;color:white;font-weight:bold;border-radius:8px;cursor:pointer;text-align:center;}
  </style>
</head>
<body>
<header><h1>Color Palettes</h1></header>
<main id="app"></main>

<script>
  // ------------ 工具函式 -------------
  function hexToRgb(hex) {
    hex = hex.replace("#", "");
    if (hex.length === 3) hex = hex.split("").map(c => c+c).join("");
    const v = parseInt(hex, 16);
    return [(v >> 16) & 255, (v >> 8) & 255, v & 255];
  }

  function rgbToHex(r,g,b){
    return "#" + [r,g,b].map(x=>x.toString(16).padStart(2,"0")).join("");
  }

  function rgbToHsl(r,g,b){
    r/=255; g/=255; b/=255;
    const max = Math.max(r,g,b), min = Math.min(r,g,b);
    let h,s,l = (max+min)/2;
    if(max===min){h=s=0;}
    else {
      const d = max-min;
      s = l>0.5 ? d/(2-max-min) : d/(max+min);
      switch(max){
        case r: h = (g-b)/d + (g<b?6:0); break;
        case g: h = (b-r)/d + 2; break;
        case b: h = (r-g)/d + 4; break;
      }
      h /= 6;
    }
    return [Math.round(h*360), Math.round(s*100), Math.round(l*100)];
  }

  function hslToRgb(h,s,l){
    s/=100; l/=100; h/=360;
    let r,g,b;
    if(s===0){r=g=b=l;}
    else {
      const hue2rgb = (p,q,t) => {
        if(t<0) t+=1; if(t>1) t-=1;
        if(t<1/6) return p + (q-p)*6*t;
        if(t<1/2) return q;
        if(t<2/3) return p + (q-p)*(2/3-t)*6;
        return p;
      };
      const q = l<0.5? l*(1+s) : l+s-l*s;
      const p = 2*l - q;
      r = hue2rgb(p,q,h+1/3);
      g = hue2rgb(p,q,h);
      b = hue2rgb(p,q,h-1/3);
    }
    return [Math.round(r*255),Math.round(g*255),Math.round(b*255)];
  }

  function hslToHex(h,s,l){
    const rgb = hslToRgb(h,s,l);
    return rgbToHex(rgb[0],rgb[1],rgb[2]);
  }

  // ------------ 手動色票 (示範簡化) -------------
  const manualPalettes = [
const manualPalettes = [
  { id:"ocean_breeze_1", name:"Ocean Breeze", colors:["#1E4F66","#70A9A1","#C9E4CA","#F0F4F8"] },
  { id:"sunset_glow_1", name:"Sunset Glow", colors:["#FF6F61","#FFA77F","#FFD6A5","#FFF3E0"] },
  { id:"lavender_dream_1", name:"Lavender Dream", colors:["#7B5E99","#B39BC8","#E6D8F2","#FAF5FF"] },
  { id:"mint_frost_1", name:"Mint Frost", colors:["#4CB5AE","#A7D7C5","#E0F2F1","#F9FFFC"] },
  { id:"autumn_maple_1", name:"Autumn Maple", colors:["#A63D40","#E07B7B","#F4C7AB","#FFF1E6"] },
  { id:"peach_blush_1", name:"Peach Blush", colors:["#F5A6A1","#FCD5CE","#FFF1E6","#FFF9F5"] },
  { id:"stormy_sky_1", name:"Stormy Sky", colors:["#2E3C54","#6B7B8C","#B0C4D1","#E6EBF2"] },
  { id:"sunny_meadow_1", name:"Sunny Meadow", colors:["#7BB662","#B8D8A7","#E6F4D9","#F9FFF1"] },
  { id:"coral_tide_1", name:"Coral Tide", colors:["#FF7660","#FFB196","#FFE3D0","#FFF7F2"] },
  { id:"twilight_purple_1", name:"Twilight Purple", colors:["#4B3F72","#8C79A0","#C8B8D8","#F4F0F8"] },
  { id:"autumn_rain_1", name:"Autumn Rain", colors:["#486A8A","#B0C4D1","#F5E1D0","#F7BFAF"] },
  { id:"coral_sky_1", name:"Coral Sky", colors:["#FF7F6E","#FFC4A3","#D0E6F1","#A3C1D9"] },
  { id:"twilight_lilac_1", name:"Twilight Lilac", colors:["#6B5B95","#D6C1E1","#FFE3B3","#FFB380"] },
  { id:"mint_peach_1", name:"Mint Peach", colors:["#50B2A2","#A0E3D6","#FFD7B5","#FF9E80"] },
  { id:"sunset_reef_1", name:"Sunset Reef", colors:["#FF6F61","#FFA77F","#80BBD0","#3C7A91"] },
  { id:"lavender_sunset_1", name:"Lavender Sunset", colors:["#8E7CC3","#D3C0EB","#FFD5A5","#FF8C61"] },
  { id:"frosted_tangerine_1", name:"Frosted Tangerine", colors:["#F5B971","#FFD7AA","#A3D2E2","#467599"] },
  { id:"peach_fog_1", name:"Peach Fog", colors:["#F6A5A2","#FFD6C0","#B0D0E8","#557A95"] },
  { id:"cerulean_coral_1", name:"Cerulean Coral", colors:["#3A7CA5","#A1C6EA","#FFD8B1","#FF8C61"] },
  { id:"sage_sunset_1", name:"Sage Sunset", colors:["#7B9E87","#C6DABF","#FFD8A9","#FF9472"] },
  { id:"misty_melon_1", name:"Misty Melon", colors:["#FFA07A","#FFD2B2","#8EC5FC","#5A7D9A"] },
  { id:"indigo_peach_1", name:"Indigo Peach", colors:["#4B3F72","#A592D6","#FFCAA5","#FF8A61"] },
  { id:"aqua_apricot_1", name:"Aqua Apricot", colors:["#50C9CE","#A6E3E9","#FFD3B6","#FF8B6A"] },
  { id:"rose_fjord_1", name:"Rose Fjord", colors:["#C94C4C","#F2B5A0","#7DB7C9","#3E6682"] },
  { id:"lavender_peach_1", name:"Lavender Peach", colors:["#967BB6","#D3C1E5","#FFCAA5","#FF8C61"] },
  { id:"mint_sunset_1", name:"Mint Sunset", colors:["#64C2A6","#A3E0D8","#FFB788","#FF7A5C"] },
  { id:"cobalt_apricot_1", name:"Cobalt Apricot", colors:["#3B5BA3","#91BCE0","#FFD1A5","#FF8C61"] },
  { id:"stormy_peach_1", name:"Stormy Peach", colors:["#556270","#778CA3","#FFB78F","#FF8C61"] },
  { id:"peach_mist_1", name:"Peach Mist", colors:["#FF9E80","#FFD7B5","#80BBD0","#3C7A91"] },
  { id:"tangerine_frost_1", name:"Tangerine Frost", colors:["#FF914D","#FFD6AA","#8EC5FC","#5A7D9A"] },
  { id:"blue_peach_1", name:"Blue Peach", colors:["#3D5C8A","#9DBCD6","#FFD1A5","#FF8C61"] },
  { id:"lavender_mint_1", name:"Lavender Mint", colors:["#8E7CC3","#D3C0EB","#50B2A2","#A0E3D6"] },
  { id:"sunset_mint_1", name:"Sunset Mint", colors:["#FF6F61","#FFA77F","#50B2A2","#A0E3D6"] },
  { id:"peach_fjord_1", name:"Peach Fjord", colors:["#FF8C61","#FFD1A5","#3A7CA5","#A1C6EA"] },
  { id:"coral_mist_1", name:"Coral Mist", colors:["#FF7660","#FFC4A3","#7EB7E4","#CCD9E8"] },
  { id:"sage_coral_1", name:"Sage Coral", colors:["#7B9E87","#C6DABF","#FF7F6E","#FFA77F"] },
  { id:"mint_coral_1", name:"Mint Coral", colors:["#50B2A2","#A0E3D6","#FF6F61","#FFA77F"] },
  { id:"sunset_lilac_1", name:"Sunset Lilac", colors:["#FF7F6E","#FFA77F","#8E7CC3","#D3C0EB"] },
  { id:"peach_lilac_1", name:"Peach Lilac", colors:["#FFCAA5","#FF8C61","#967BB6","#D3C1E5"] },
  { id:"frosted_coral_1", name:"Frosted Coral", colors:["#FFD1A5","#FF8C61","#3A7CA5","#A1C6EA"] },
  { id:"aqua_sunset_1", name:"Aqua Sunset", colors:["#50C9CE","#A6E3E9","#FF6F61","#FFA77F"] },
  { id:"lavender_fjord_1", name:"Lavender Fjord", colors:["#967BB6","#D3C1E5","#3A7CA5","#A1C6EA"] },
  { id:"mixed_1", name:"Mixed Palette 1", colors:["#3A7CA5","#70A9A1","#FF8C61","#FFD1A5"] },
  { id:"mixed_2", name:"Mixed Palette 2", colors:["#4B6B8F","#9CB4CC","#FFB78F","#FFE3D0"] },
  { id:"mixed_3", name:"Mixed Palette 3", colors:["#2F4F73","#8FBBC7","#FF9E80","#FFD7B5"] },
  { id:"mixed_4", name:"Mixed Palette 4", colors:["#356885","#88B8D1","#FFA77F","#FFF1E6"] },
  { id:"mixed_5", name:"Mixed Palette 5", colors:["#3F5C7D","#80A8C0","#FFB196","#FFE3D0"] },
  { id:"mixed_6", name:"Mixed Palette 6", colors:["#426A8A","#7DB3D1","#FF9E80","#FFD7B5"] },
  { id:"mixed_7", name:"Mixed Palette 7", colors:["#345978","#7F99B0","#FF8C61","#FFC4A3"] },
  { id:"mixed_8", name:"Mixed Palette 8", colors:["#3E6A8D","#78AACC","#FF7F6E","#FFE7D8"] },
  { id:"mixed_9", name:"Mixed Palette 9", colors:["#2E4C6F","#6FA9C0","#FF9966","#FFD6AA"] },
  { id:"mixed_10", name:"Mixed Palette 10", colors:["#3B5A82","#78A1B9","#FF9E80","#FFF1E6"] },
  { id:"mixed_11", name:"Mixed Palette 11", colors:["#2C4F68","#78A4C2","#FF8C61","#FFCA9A"] },
  { id:"mixed_12", name:"Mixed Palette 12", colors:["#3D6085","#8CB6D3","#FFAF87","#FFE1C2"] },
  { id:"mixed_13", name:"Mixed Palette 13", colors:["#375974","#7BA7BC","#FFA77F","#FFEBD8"] },
  { id:"mixed_14", name:"Mixed Palette 14", colors:["#2E4B6E","#80B1C9","#FF8C61","#FFD4AA"] },
  { id:"mixed_15", name:"Mixed Palette 15", colors:["#3A5D80","#8EB8D8","#FF9E80","#FFF0E3"] },
  { id:"mixed_16", name:"Mixed Palette 16", colors:["#2B486B","#7FB4C7","#FFB196","#FFE6C7"] },
  { id:"mixed_17", name:"Mixed Palette 17", colors:["#346283","#87BFD6","#FF8C61","#FFDDBC"] },
  { id:"mixed_18", name:"Mixed Palette 18", colors:["#3F5A7E","#7FAEC4","#FF7F6E","#FFE9D4"] },
  { id:"mixed_19", name:"Mixed Palette 19", colors:["#284C69","#6FA4B7","#FF9E80","#FFDCB8"] },
  { id:"mixed_20", name:"Mixed Palette 20", colors:["#36597A","#8BB9D9","#FFAB7E","#FFE3CE"] },
  { id:"mixed_21", name:"Mixed Palette 21", colors:["#2A4765","#79A2BD","#FF8C61","#FFD5A9"] },
  { id:"mixed_22", name:"Mixed Palette 22", colors:["#3A5F82","#92C4E1","#FFAC7C","#FFE8D8"] },
  { id:"mixed_23", name:"Mixed Palette 23", colors:["#346178","#87BED9","#FF8C61","#FFDCB1"] },
  { id:"mixed_24", name:"Mixed Palette 24", colors:["#2D4B6E","#78ABC1","#FF9E80","#FFE1C8"] },
  { id:"mixed_25", name:"Mixed Palette 25", colors:["#3C5C83","#80B1CE","#FFA77F","#FFE7D8"] },
  { id:"mixed_26", name:"Mixed Palette 26", colors:["#2B486A","#74A8BF","#FF9E80","#FFD6B2"] },
  { id:"mixed_27", name:"Mixed Palette 27", colors:["#3F6085","#8ABEDC","#FF7F6E","#FFE9D0"] },
  { id:"mixed_28", name:"Mixed Palette 28", colors:["#254969","#699EB9","#FFA77F","#FFE2CC"] },
  { id:"mixed_29", name:"Mixed Palette 29", colors:["#39607D","#8CBAD7","#FF9966","#FFD4AA"] },
  { id:"mixed_30", name:"Mixed Palette 30", colors:["#294B6E","#77A9C3","#FF8C61","#FFE5D1"] },
  { id:"mixed_31", name:"Mixed Palette 31", colors:["#3E5C7F","#90B9DF","#FFAF87","#FFEAD9"] },
  { id:"mixed_32", name:"Mixed Palette 32", colors:["#2D4A6B","#6EA3B4","#FF9E80","#FFD5AF"] },
  { id:"mixed_33", name:"Mixed Palette 33", colors:["#3A5B7C","#80B0CB","#FF8C61","#FFE0D3"] },
  { id:"mixed_34", name:"Mixed Palette 34", colors:["#304F70","#7BB7D3","#FFA77F","#FFD9C2"] },
  { id:"mixed_35", name:"Mixed Palette 35", colors:["#3B6487","#8DBED9","#FF9E80","#FFF0E6"] },
  { id:"mixed_36", name:"Mixed Palette 36", colors:["#2F4671","#7AA8C7","#FF8C61","#FFE7D8"] },
  { id:"mixed_37", name:"Mixed Palette 37", colors:["#3F5F8A","#99C6E7","#FFA77F","#FFF1E8"] },
  { id:"mixed_38", name:"Mixed Palette 38", colors:["#264A6F","#6CA8C2","#FF9966","#FFD7B0"] },
  { id:"mixed_39", name:"Mixed Palette 39", colors:["#375A7F","#93CBE2","#FFAF87","#FFE9D5"] },
  { id:"mixed_40", name:"Mixed Palette 40", colors:["#2B4A6C","#78AFC6","#FF8C61","#FFDDC3"] },
  { id:"mixed_41", name:"Mixed Palette 41", colors:["#3E6189","#8FCFE5","#FFB78F","#FFEDD8"] },
  { id:"mixed_42", name:"Mixed Palette 42", colors:["#2E4C70","#76ACC3","#FF9966","#FFE1C4"] },
  { id:"mixed_43", name:"Mixed Palette 43", colors:["#3B5A81","#92CEE4","#FFAF87","#FFF1DC"] },
  { id:"mixed_44", name:"Mixed Palette 44", colors:["#264E6D","#6F9FBF","#FF8C61","#FFDFC2"] },
  { id:"mixed_45", name:"Mixed Palette 45", colors:["#3C5E85","#87C8DF","#FF9E80","#FFE6D8"] },
  { id:"mixed_46", name:"Mixed Palette 46", colors:["#2A4670","#75A6C9","#FFA77F","#FFDFD0"] },
  { id:"mixed_47", name:"Mixed Palette 47", colors:["#3D6088","#99D4E8","#FFAF87","#FFF3E2"] },
  { id:"mixed_48", name:"Mixed Palette 48", colors:["#294F6F","#6DA8C8","#FF9966","#FFD8B2"] },
  { id:"mixed_49", name:"Mixed Palette 49", colors:["#38587C","#91C5E3","#FF9E80","#FFE4D5"] },
  { id:"mixed_50", name:"Mixed Palette 50", colors:["#2D4F6E","#78B0CE","#FFA77F","#FFEDD9"] },

  { id:"mixed_51", name:"Mixed Palette 51", colors:["#37607A","#85C4E1","#FFAB7A","#FFF0DF"] },
  { id:"mixed_52", name:"Mixed Palette 52", colors:["#2E4B6E","#78AEC7","#FF8C61","#FFDFC2"] },
  { id:"mixed_53", name:"Mixed Palette 53", colors:["#3E6188","#8FD4E7","#FFB78F","#FFEBDD"] },
  { id:"mixed_54", name:"Mixed Palette 54", colors:["#2B496B","#74A8C1","#FF9966","#FFDCB4"] },
  { id:"mixed_55", name:"Mixed Palette 55", colors:["#3A577F","#92C9E2","#FFA77F","#FFE9D3"] },
  { id:"mixed_56", name:"Mixed Palette 56", colors:["#304F6F","#6CAECF","#FF8C61","#FFDCC1"] },
  { id:"mixed_57", name:"Mixed Palette 57", colors:["#3C6289","#90D6EB","#FFAC7C","#FFF3E8"] },
  { id:"mixed_58", name:"Mixed Palette 58", colors:["#2F4A6D","#76AACF","#FF9966","#FFE0CC"] },
  { id:"mixed_59", name:"Mixed Palette 59", colors:["#3E5A82","#8CCBE3","#FFB78F","#FFEFD7"] },
  { id:"mixed_60", name:"Mixed Palette 60", colors:["#2D4D6E","#78B4D0","#FF8C61","#FFD9C3"] },
  { id:"mixed_1", name:"Mixed Palette 1", colors:["#3A7CA5","#70A9A1","#FF8C61","#FFD1A5"] },
  { id:"mixed_2", name:"Mixed Palette 2", colors:["#4B6B8F","#9CB4CC","#FFB78F","#FFE3D0"] },
  { id:"mixed_3", name:"Mixed Palette 3", colors:["#2F4F73","#8FBBC7","#FF9E80","#FFD7B5"] },
  { id:"mixed_4", name:"Mixed Palette 4", colors:["#356885","#88B8D1","#FFA77F","#FFF1E6"] },
  { id:"mixed_5", name:"Mixed Palette 5", colors:["#3F5C7D","#80A8C0","#FFB196","#FFE3D0"] },
  { id:"mixed_6", name:"Mixed Palette 6", colors:["#426A8A","#7DB3D1","#FF9E80","#FFD7B5"] },
  { id:"mixed_7", name:"Mixed Palette 7", colors:["#345978","#7F99B0","#FF8C61","#FFC4A3"] },
  { id:"mixed_8", name:"Mixed Palette 8", colors:["#3E6A8D","#78AACC","#FF7F6E","#FFE7D8"] },
  { id:"mixed_9", name:"Mixed Palette 9", colors:["#2E4C6F","#6FA9C0","#FF9966","#FFD6AA"] },
  { id:"mixed_10", name:"Mixed Palette 10", colors:["#3B5A82","#78A1B9","#FF9E80","#FFF1E6"] },
  { id:"mixed_11", name:"Mixed Palette 11", colors:["#2C4F68","#78A4C2","#FF8C61","#FFCA9A"] },
  { id:"mixed_12", name:"Mixed Palette 12", colors:["#3D6085","#8CB6D3","#FFAF87","#FFE1C2"] },
  { id:"mixed_13", name:"Mixed Palette 13", colors:["#375974","#7BA7BC","#FFA77F","#FFEBD8"] },
  { id:"mixed_14", name:"Mixed Palette 14", colors:["#2E4B6E","#80B1C9","#FF8C61","#FFD4AA"] },
  { id:"mixed_15", name:"Mixed Palette 15", colors:["#3A5D80","#8EB8D8","#FF9E80","#FFF0E3"] },
  { id:"mixed_16", name:"Mixed Palette 16", colors:["#2B486B","#7FB4C7","#FFB196","#FFE6C7"] },
  { id:"mixed_17", name:"Mixed Palette 17", colors:["#346283","#87BFD6","#FF8C61","#FFDDBC"] },
  { id:"mixed_18", name:"Mixed Palette 18", colors:["#3F5A7E","#7FAEC4","#FF7F6E","#FFE9D4"] },
  { id:"mixed_19", name:"Mixed Palette 19", colors:["#284C69","#6FA4B7","#FF9E80","#FFDCB8"] },
  { id:"mixed_20", name:"Mixed Palette 20", colors:["#36597A","#8BB9D9","#FFAB7E","#FFE3CE"] },
  { id:"mixed_21", name:"Mixed Palette 21", colors:["#2A4765","#79A2BD","#FF8C61","#FFD5A9"] },
  { id:"mixed_22", name:"Mixed Palette 22", colors:["#3A5F82","#92C4E1","#FFAC7C","#FFE8D8"] },
  { id:"mixed_23", name:"Mixed Palette 23", colors:["#346178","#87BED9","#FF8C61","#FFDCB1"] },
  { id:"mixed_24", name:"Mixed Palette 24", colors:["#2D4B6E","#78ABC1","#FF9E80","#FFE1C8"] },
  { id:"mixed_25", name:"Mixed Palette 25", colors:["#3C5C83","#80B1CE","#FFA77F","#FFE7D8"] },
  { id:"mixed_26", name:"Mixed Palette 26", colors:["#2B486A","#74A8BF","#FF9E80","#FFD6B2"] },
  { id:"mixed_27", name:"Mixed Palette 27", colors:["#3F6085","#8ABEDC","#FF7F6E","#FFE9D0"] },
  { id:"mixed_28", name:"Mixed Palette 28", colors:["#254969","#699EB9","#FFA77F","#FFE2CC"] },
  { id:"mixed_29", name:"Mixed Palette 29", colors:["#39607D","#8CBAD7","#FF9966","#FFD4AA"] },
  { id:"mixed_30", name:"Mixed Palette 30", colors:["#294B6E","#77A9C3","#FF8C61","#FFE5D1"] },
  { id:"mixed_31", name:"Mixed Palette 31", colors:["#3E5C7F","#90B9DF","#FFAF87","#FFEAD9"] },
  { id:"mixed_32", name:"Mixed Palette 32", colors:["#2D4A6B","#6EA3B4","#FF9E80","#FFD5AF"] },
  { id:"mixed_33", name:"Mixed Palette 33", colors:["#3A5B7C","#80B0CB","#FF8C61","#FFE0D3"] },
  { id:"mixed_34", name:"Mixed Palette 34", colors:["#304F70","#7BB7D3","#FFA77F","#FFD9C2"] },
  { id:"mixed_35", name:"Mixed Palette 35", colors:["#3B6487","#8DBED9","#FF9E80","#FFF0E6"] },
  { id:"mixed_36", name:"Mixed Palette 36", colors:["#2F4671","#7AA8C7","#FF8C61","#FFE7D8"] },
  { id:"mixed_37", name:"Mixed Palette 37", colors:["#3F5F8A","#99C6E7","#FFA77F","#FFF1E8"] },
  { id:"mixed_38", name:"Mixed Palette 38", colors:["#264A6F","#6CA8C2","#FF9966","#FFD7B0"] },
  { id:"mixed_39", name:"Mixed Palette 39", colors:["#375A7F","#93CBE2","#FFAF87","#FFE9D5"] },
  { id:"mixed_40", name:"Mixed Palette 40", colors:["#2B4A6C","#78AFC6","#FF8C61","#FFDDC3"] },
  { id:"mixed_41", name:"Mixed Palette 41", colors:["#3E6189","#8FCFE5","#FFB78F","#FFEDD8"] },
  { id:"mixed_42", name:"Mixed Palette 42", colors:["#2E4C70","#76ACC3","#FF9966","#FFE1C4"] },
  { id:"mixed_43", name:"Mixed Palette 43", colors:["#3B5A81","#92CEE4","#FFAF87","#FFF1DC"] },
  { id:"mixed_44", name:"Mixed Palette 44", colors:["#264E6D","#6F9FBF","#FF8C61","#FFDFC2"] },
  { id:"mixed_45", name:"Mixed Palette 45", colors:["#3C5E85","#87C8DF","#FF9E80","#FFE6D8"] },
  { id:"mixed_46", name:"Mixed Palette 46", colors:["#2A4670","#75A6C9","#FFA77F","#FFDFD0"] },
  { id:"mixed_47", name:"Mixed Palette 47", colors:["#3D6088","#99D4E8","#FFAF87","#FFF3E2"] },
  { id:"mixed_48", name:"Mixed Palette 48", colors:["#294F6F","#6DA8C8","#FF9966","#FFD8B2"] },
  { id:"mixed_49", name:"Mixed Palette 49", colors:["#38587C","#91C5E3","#FF9E80","#FFE4D5"] },
  { id:"mixed_51", name:"Mixed Palette 51", colors:["#3A5C87","#8AC1DC","#FF9E80","#FFEFE5"] },
  { id:"mixed_52", name:"Mixed Palette 52", colors:["#2C4E70","#78ACBF","#FF9966","#FFDCC2"] },
  { id:"mixed_53", name:"Mixed Palette 53", colors:["#3F618C","#90CBE3","#FFAF87","#FFF2E6"] },
  { id:"mixed_54", name:"Mixed Palette 54", colors:["#2F4B6F","#75A8C3","#FF8C61","#FFD8B5"] },
  { id:"mixed_55", name:"Mixed Palette 55", colors:["#386180","#8CC0D8","#FFA77F","#FFE7D3"] },
  { id:"mixed_56", name:"Mixed Palette 56", colors:["#2B496D","#70A9BF","#FF9966","#FFD9B8"] },
  { id:"mixed_57", name:"Mixed Palette 57", colors:["#3C6187","#97CDE4","#FFAF87","#FFF1E8"] },
  { id:"mixed_58", name:"Mixed Palette 58", colors:["#2D4F6F","#78B0C7","#FF8C61","#FFDFC2"] },
  { id:"mixed_59", name:"Mixed Palette 59", colors:["#3E5F89","#8FCFE2","#FFA77F","#FFEFE0"] },
  { id:"mixed_60", name:"Mixed Palette 60", colors:["#2F4E70","#76ADC3","#FF9966","#FFE2C4"] },
  { id:"mixed_61", name:"Mixed Palette 61", colors:["#3B6085","#92D0E5","#FFAF87","#FFF2DE"] },
  { id:"mixed_62", name:"Mixed Palette 62", colors:["#2C486B","#74A8C1","#FF8C61","#FFDCC1"] },
  { id:"mixed_63", name:"Mixed Palette 63", colors:["#3D628A","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_64", name:"Mixed Palette 64", colors:["#2F4B6E","#78B1C5","#FF9966","#FFE4C5"] },
  { id:"mixed_65", name:"Mixed Palette 65", colors:["#396083","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_66", name:"Mixed Palette 66", colors:["#2A486B","#70A7BB","#FF8C61","#FFDAB5"] },
  { id:"mixed_67", name:"Mixed Palette 67", colors:["#3F6189","#97CFE4","#FFAF87","#FFF1E5"] },
  { id:"mixed_68", name:"Mixed Palette 68", colors:["#2D4F6E","#78B2C7","#FF9966","#FFE5C8"] },
  { id:"mixed_69", name:"Mixed Palette 69", colors:["#3C5D82","#8FC2D9","#FFA77F","#FFE7D8"] },
  { id:"mixed_70", name:"Mixed Palette 70", colors:["#2E4B6F","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_71", name:"Mixed Palette 71", colors:["#3E6086","#90D0E5","#FFAF87","#FFF0E2"] },
  { id:"mixed_72", name:"Mixed Palette 72", colors:["#2C486D","#74A8C1","#FF9966","#FFD9B8"] },
  { id:"mixed_73", name:"Mixed Palette 73", colors:["#3D6187","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_74", name:"Mixed Palette 74", colors:["#2F4F70","#78B0C7","#FF8C61","#FFE2C5"] },
  { id:"mixed_75", name:"Mixed Palette 75", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_76", name:"Mixed Palette 76", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_77", name:"Mixed Palette 77", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_78", name:"Mixed Palette 78", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_79", name:"Mixed Palette 79", colors:["#3B6085","#8FCFE2","#FFA77F","#FFEFE0"] },
  { id:"mixed_80", name:"Mixed Palette 80", colors:["#2D4B6E","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_81", name:"Mixed Palette 81", colors:["#3E6187","#92D0E5","#FFAF87","#FFF2DE"] },
  { id:"mixed_82", name:"Mixed Palette 82", colors:["#2C486B","#74A8C1","#FF8C61","#FFDCC1"] },
  { id:"mixed_83", name:"Mixed Palette 83", colors:["#3F628A","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_84", name:"Mixed Palette 84", colors:["#2F4E70","#78B1C5","#FF9966","#FFE4C5"] },
  { id:"mixed_85", name:"Mixed Palette 85", colors:["#396083","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_86", name:"Mixed Palette 86", colors:["#2A486B","#70A7BB","#FF8C61","#FFDAB5"] },
  { id:"mixed_87", name:"Mixed Palette 87", colors:["#3E6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_88", name:"Mixed Palette 88", colors:["#2D4F6E","#78B2C7","#FF9966","#FFE5C8"] },
  { id:"mixed_89", name:"Mixed Palette 89", colors:["#3C5D82","#8FC2D9","#FFA77F","#FFE7D8"] },
  { id:"mixed_90", name:"Mixed Palette 90", colors:["#2E4B6F","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_91", name:"Mixed Palette 91", colors:["#3E6086","#90D0E5","#FFAF87","#FFF0E2"] },
  { id:"mixed_92", name:"Mixed Palette 92", colors:["#2C486D","#74A8C1","#FF9966","#FFD9B8"] },
  { id:"mixed_93", name:"Mixed Palette 93", colors:["#3D6187","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_94", name:"Mixed Palette 94", colors:["#2F4F70","#78B0C7","#FF8C61","#FFE2C5"] },
  { id:"mixed_95", name:"Mixed Palette 95", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_96", name:"Mixed Palette 96", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_97", name:"Mixed Palette 97", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_98", name:"Mixed Palette 98", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_99", name:"Mixed Palette 99", colors:["#3B6085","#8FCFE2","#FFA77F","#FFEFE0"] },
  { id:"mixed_100", name:"Mixed Palette 100", colors:["#2D4B6E","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_101", name:"Mixed Palette 101", colors:["#3F628C","#8FCFE3","#FFAA88","#FFF1E5"] },
  { id:"mixed_102", name:"Mixed Palette 102", colors:["#2F4E70","#76ACC3","#FF9966","#FFE2C5"] },
  { id:"mixed_103", name:"Mixed Palette 103", colors:["#3C6085","#90D0E5","#FFA77F","#FFEFE0"] },
  { id:"mixed_104", name:"Mixed Palette 104", colors:["#2C486D","#74A8C1","#FF8C61","#FFDCC1"] },
  { id:"mixed_105", name:"Mixed Palette 105", colors:["#3D6187","#99D4E8","#FFAF87","#FFF3E4"] },
  { id:"mixed_106", name:"Mixed Palette 106", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_107", name:"Mixed Palette 107", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_108", name:"Mixed Palette 108", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_109", name:"Mixed Palette 109", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_110", name:"Mixed Palette 110", colors:["#2D4F6E","#78B2C7","#FF9966","#FFE5C8"] },
  { id:"mixed_111", name:"Mixed Palette 111", colors:["#3B6085","#8FCFE2","#FFA77F","#FFEFE0"] },
  { id:"mixed_112", name:"Mixed Palette 112", colors:["#2F4B6F","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_113", name:"Mixed Palette 113", colors:["#3E6186","#90D0E5","#FFAF87","#FFF0E2"] },
  { id:"mixed_114", name:"Mixed Palette 114", colors:["#2C486D","#74A8C1","#FF9966","#FFD9B8"] },
  { id:"mixed_115", name:"Mixed Palette 115", colors:["#3D6187","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_116", name:"Mixed Palette 116", colors:["#2F4F70","#78B0C7","#FF8C61","#FFE2C5"] },
  { id:"mixed_117", name:"Mixed Palette 117", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_118", name:"Mixed Palette 118", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_119", name:"Mixed Palette 119", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_120", name:"Mixed Palette 120", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_121", name:"Mixed Palette 121", colors:["#3F628C","#8FCFE3","#FFAA88","#FFF1E5"] },
  { id:"mixed_122", name:"Mixed Palette 122", colors:["#2F4E70","#76ACC3","#FF9966","#FFE2C5"] },
  { id:"mixed_123", name:"Mixed Palette 123", colors:["#3C6085","#90D0E5","#FFA77F","#FFEFE0"] },
  { id:"mixed_124", name:"Mixed Palette 124", colors:["#2C486D","#74A8C1","#FF8C61","#FFDCC1"] },
  { id:"mixed_125", name:"Mixed Palette 125", colors:["#3D6187","#99D4E8","#FFAF87","#FFF3E4"] },
  { id:"mixed_126", name:"Mixed Palette 126", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_127", name:"Mixed Palette 127", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_128", name:"Mixed Palette 128", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_129", name:"Mixed Palette 129", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_130", name:"Mixed Palette 130", colors:["#2D4F6E","#78B2C7","#FF9966","#FFE5C8"] },
  { id:"mixed_131", name:"Mixed Palette 131", colors:["#3B6085","#8FCFE2","#FFA77F","#FFEFE0"] },
  { id:"mixed_132", name:"Mixed Palette 132", colors:["#2F4B6F","#76ACC3","#FF8C61","#FFDCCB"] },
  { id:"mixed_133", name:"Mixed Palette 133", colors:["#3E6186","#90D0E5","#FFAF87","#FFF0E2"] },
  { id:"mixed_134", name:"Mixed Palette 134", colors:["#2C486D","#74A8C1","#FF9966","#FFD9B8"] },
  { id:"mixed_135", name:"Mixed Palette 135", colors:["#3D6187","#99D4E8","#FFA77F","#FFF3E4"] },
  { id:"mixed_136", name:"Mixed Palette 136", colors:["#2F4F70","#78B0C7","#FF8C61","#FFE2C5"] },
  { id:"mixed_137", name:"Mixed Palette 137", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_138", name:"Mixed Palette 138", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_139", name:"Mixed Palette 139", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_140", name:"Mixed Palette 140", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_141", name:"Mixed Palette 141", colors:["#3F628C","#8FCFE3","#FFAA88","#FFF1E5"] },
  { id:"mixed_142", name:"Mixed Palette 142", colors:["#2F4E70","#76ACC3","#FF9966","#FFE2C5"] },
  { id:"mixed_143", name:"Mixed Palette 143", colors:["#3C6085","#90D0E5","#FFA77F","#FFEFE0"] },
  { id:"mixed_144", name:"Mixed Palette 144", colors:["#2C486D","#74A8C1","#FF8C61","#FFDCC1"] },
  { id:"mixed_145", name:"Mixed Palette 145", colors:["#3D6187","#99D4E8","#FFAF87","#FFF3E4"] },
  { id:"mixed_146", name:"Mixed Palette 146", colors:["#2E4F70","#78B1C7","#FF9966","#FFE5C8"] },
  { id:"mixed_147", name:"Mixed Palette 147", colors:["#386183","#8CC7DD","#FF9E80","#FFE9D8"] },
  { id:"mixed_148", name:"Mixed Palette 148", colors:["#2B496D","#70A9BF","#FF9966","#FFDAB5"] },
  { id:"mixed_149", name:"Mixed Palette 149", colors:["#3C6189","#97D2E5","#FFAF87","#FFF1E5"] },
  { id:"mixed_150", name:"Mixed Palette 150", colors:["#2D4F6E","#78B2C7","#FF9966","#FFE5C8"] }
 
];


  // ------------ 自動生成色票 -------------
  function randomHSL(style){
    let h,s,l;
    switch(style){
      case "morandi": h=Math.random()*360; s=Math.random()*0.2+0.1; l=Math.random()*0.2+0.5; break;
      case "pastel": h=Math.random()*360; s=Math.random()*0.4+0.3; l=Math.random()*0.3+0.7; break;
      case "contrast": h=Math.random()*360; s=Math.random()*0.5+0.5; l=Math.random()*0.4+0.3; break;
      default: h=Math.random()*360; s=0.5; l=0.5;
    }
    return {h,s,l};
  }

  function generateHarmoniousPalette(colorsPerPalette=4, style="pastel"){
    const base = randomHSL(style);
    const colors = [];
    for(let j=0;j<colorsPerPalette;j++){
      const h = (base.h + j*30)%360;
      colors.push(hslToHex(h, base.s*100, base.l*100));
    }
    return {id:`${style}_${Math.floor(Math.random()*100000)}`, name:`${style} palette`, colors, style};
  }

  const generatedPalettes = [];
  for(let i=0;i<100;i++){ // 減少生成數量避免卡頓
    const numColors = 4 + Math.floor(Math.random()*2);
    const styleOptions = ["morandi","pastel","contrast"];
    const style = styleOptions[Math.floor(Math.random()*styleOptions.length)];
    generatedPalettes.push(generateHarmoniousPalette(numColors,style));
  }

  const palettes = manualPalettes.concat(generatedPalettes);

  // ------------ 渲染頁面 -------------
  const app = document.getElementById("app");

  function renderHome(){
    const showCount = 100;
    app.innerHTML=`
      <div class="grid">
        ${palettes.slice(0,showCount).map(p=>`
          <div class="card" onclick="goPalette('${p.id}')">
            <div class="colors">
              ${p.colors.map(c=>`<div style="background:${c}"></div>`).join("")}
            </div>
            <p>${p.name}</p>
          </div>
        `).join("")}
      </div>`;
  }

  function renderPalette(id){
    const p = palettes.find(x=>x.id===id);
    if(!p){ renderHome(); return; }
    app.innerHTML=`
      <a class="back" href="#home">← Back</a>
      <div class="palette-full">
        ${p.colors.map(c=>`<div style="background:${c}" onclick="goColor('${c.replace("#","")}')">${c}</div>`).join("")}
      </div>`;
  }

  function renderColor(hex){
    const c = "#" + hex;
    document.body.style.background = `
      linear-gradient(135deg, rgba(245,247,250,0.5), rgba(195,207,226,0.5)),
      url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1950&q=80')`;
    const [r,g,b] = hexToRgb(c);
    const [h,s,l] = rgbToHsl(r,g,b);
    const related = {
      analogous: [hslToHex((h+30)%360,s,l), hslToHex((h+330)%360,s,l)],
      complementary: [hslToHex((h+180)%360,s,l)],
      triadic: [hslToHex((h+120)%360,s,l), hslToHex((h+240)%360,s,l)]
    };

    app.innerHTML=`
      <a class="back" href="#home">← Back</a>
      <div class="color-box" style="background:${c}">${c}</div>
      <p>RGB: (${r}, ${g}, ${b})</p>
      <p>HSL: (${h}, ${s}%, ${l}%)</p>
      <div class="related">
        <h3>Related Colors</h3>
        ${Object.entries(related).map(([label,vals])=>`
          <p>${label}</p>
          <div class="row">
            ${vals.map(col=>`<div class="swatch" style="background:${col}" onclick="goColor('${col.replace("#","")}')">${col}</div>`).join("")}
          </div>
        `).join("")}
      </div>`;
  }

  // ------------ 導覽 -------------
  function goPalette(id){ location.hash="#palette/"+id; }
  function goColor(hex){ location.hash="#color/"+hex; }

  function router(){
    const h = location.hash || "#home";
    if(h === "#home") renderHome();
    else if(h.startsWith("#palette/")) renderPalette(h.split("/")[1]);
    else if(h.startsWith("#color/")) renderColor(h.split("/")[1]);
  }

  if(!location.hash) location.hash="#home";
  window.addEventListener("hashchange",router);
  router();

</script>
</body>
</html>
